# specific settings for device
name: "H2M-5/2024-04-22"
input_dir: "data/measurements/H2M-5/2024-04-22/"
matrix_file: "data/assets/H2M-5/matrix_totcnt_eq_masked_20230613.cfg"

# general settings
detectors_file: "data/corry/alignment_dummy.geo"
config_template: "data/corry/template.conf"
htcondor_config: "data/corry/htcondor.sub"
# htcondor_config: false

measurements:
  source:
    - null_totcnt_200ms_500r
    - ironsource_totcnt_200ms_500r
    # - cadmiumsource_totcnt_2s_2000r

columns:
  "all": 'CalibrationCLICpix2/detector1/pixelCharge_all'

# list of k-alpha peaks: https://xdb.lbl.gov/Section1/Table_1-2.pdf
calibration_energy_keV:
  "ironsource_totcnt_200ms_500r": 5.899
  "cadmiumsource_totcnt_2s_2000r": 23.174
  "null_totcnt_200ms_500r": 0

fitting:
  lowest_threshold:
    "ironsource_totcnt_200ms_500r": 105
    "cadmiumsource_totcnt_2s_2000r": 90
    "null_totcnt_200ms_500r": 70

  fit_double_gaussian:
    "ironsource_totcnt_200ms_500r": False
    "cadmiumsource_totcnt_2s_2000r": False
    "null_totcnt_200ms_500r": False

  fitrange_nstddev:
    "ironsource_totcnt_200ms_500r": [1., 2.]
    "cadmiumsource_totcnt_2s_2000r": [1.]
    "null_totcnt_200ms_500r": [1., 2.]

  derivative_bandwith:
    "ironsource_totcnt_200ms_500r": [2, 3]
    "cadmiumsource_totcnt_2s_2000r": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    "null_totcnt_200ms_500r": [4]

plotting:
  xlim: [70, 200]
  xlabel: 'Threshold [a.u.]'
  ylabel: 'Normalised total pixel counts [a.u.]'
  # yscale: "log"

labels:
  "ironsource_totcnt_200ms_500r": "Fe-55 source (5.9 keV)"
  "cadmiumsource_totcnt_2s_2000r": "Cadmium (23.2 keV)"
  "null_totcnt_200ms_500r": "No source"

colours:
  "ironsource_totcnt_200ms_500r": "cyan"
  "cadmiumsource_totcnt_2s_2000r": "purple"
  "null_totcnt_200ms_500r": "gray"
